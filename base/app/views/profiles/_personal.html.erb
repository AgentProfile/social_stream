<div class="personal">
  <header>
    <h4>
      <%= t("profile.#{ @profile.subject.class.to_s.downcase }.info") %>

      <%= render partial: 'edit_icon' %>
    </h4>
  </header>

  <div class="briefing">
    <% if @profile.personal_present? %>
      <% if @profile.organization? %>
        <h5>
          <%= t('profile.organization') %>
        </h5>

        <p>
        <%= h @profile.organization %>
        </p>
      <% end %>

      <% if @profile.birthday? %>
        <h5>
          <%= t("profile.#{ @profile.subject.class.to_s.downcase }.birthday") %>:
        </h5>

        <p>
        <%= h l(@profile.birthday, :format => :long) %>
        </p>

        <% if @profile.subject.is_a?(User) %>
          <h5>
            <%= t('profile.age') %>:
          </h5>

          <p>
          <%= h @profile.age %>
          </p>
        <% end %>
      <% end %>

      <% if @profile.city? %>
        <h5>
          <%= t('profile.actualcity') %>:
        </h5>

        <p>
        <%= h @profile.city %>
        <% if @profile.country? %>
          , <%= @profile.country %>
        <% end %>
        </p>       
      <% end %>

      <% if @profile.description? %>
        <h5>
          <%= t("profile.#{ @profile.subject.class.to_s.downcase }.about") %>:
        </h5>
        <p>
        <%= h @profile.description %>
        </p>
      <% end %>

    <% else %>
      <h5>
        <%= t('profile.empty') %>
      </h5>
    <% end %>
  </div>

  <% if can? :update, @profile %>
    <div class="update">
        <%= form_for(@profile, :url => [current_subject, :profile], :remote => false) do |f| %>
          <%= f.fields_for :actor do |actor_form| %>


            <h6>
              <%= f.label t('actor.name') %>
              <span class="needed"></span>
            </h6>

            <%= actor_form.text_field :name, :class => "required form_tag" %>

            <h6>
              <%= f.label t('profile.organization') %>
            </h6>

            <%= f.text_field :organization, :class => "form_tag" %>

            <h6>
              <%= f.label t('profile.' + current_subject.class.to_s.downcase + '.birthday') %>
            </h6>

            <%= date_select "profile", "birthday", :order => [:day, :month, :year], :end_year => Date.today.year, :start_year => (Date.today.year - 100), :prompt => {:day => 'Day', :month => 'Month', :year => 'Year'} %>

            <%= f.label t('profile.actualcity') %>


            <%= f.text_field :city, :class => "form_tag" %>

            <%= f.label t('profile.country') %>

            <%= f.text_field :country, :class => "form_tag" %>

            <%= f.label t('profile.' + current_subject.class.to_s.downcase + '.about') %>

            <%= f.text_area :description, :maxlength => 200, :rows => 10, :class => "form_tag_long" %>

            <%= t('required') %>
          <% end %>
          <%= f.submit t('button.update'), :class => "button" %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>



